import{r as c,a as $,R as p}from"./index-DItYuaVy.js";import{a as i}from"./leaflet-src-DyeH44RL.js";function _(o,n){const e=c.useRef(n);c.useEffect(function(){n!==e.current&&o.attributionControl!=null&&(e.current!=null&&o.attributionControl.removeAttribution(e.current),n!=null&&o.attributionControl.addAttribution(n)),e.current=n},[o,n])}function G(o,n,e){n.center!==e.center&&o.setLatLng(n.center),n.radius!=null&&n.radius!==e.radius&&o.setRadius(n.radius)}var h=$();const X=1;function Y(o){return Object.freeze({__version:X,map:o})}function y(o,n){return Object.freeze({...o,...n})}const w=c.createContext(null);function v(){const o=c.use(w);if(o==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return o}function S(o){function n(e,t){const{instance:r,context:a}=o(e).current;c.useImperativeHandle(t,()=>r);const{children:u}=e;return u==null?null:p.createElement(w,{value:a},u)}return c.forwardRef(n)}function K(o){function n(e,t){const[r,a]=c.useState(!1),{instance:u}=o(e,a).current;c.useImperativeHandle(t,()=>u),c.useEffect(function(){r&&u.update()},[u,r,e.children]);const l=u._contentNode;return l?h.createPortal(e.children,l):null}return c.forwardRef(n)}function z(o){function n(e,t){const{instance:r}=o(e).current;return c.useImperativeHandle(t,()=>r),null}return c.forwardRef(n)}function V(o){return function(e){const t=v(),r=o(e,t),{instance:a}=r.current,u=c.useRef(e.position),{position:l}=e;return c.useEffect(function(){return a.addTo(t.map),function(){a.remove()}},[t.map,a]),c.useEffect(function(){l!=null&&l!==u.current&&(a.setPosition(l),u.current=l)},[a,l]),r}}function I(o,n){const e=c.useRef(void 0);c.useEffect(function(){return n!=null&&o.instance.on(n),e.current=n,function(){e.current!=null&&o.instance.off(e.current),e.current=null}},[o,n])}function b(o,n){const e=o.pane??n.pane;return e?{...o,pane:e}:o}function Q(o,n){return function(t,r){const a=v(),u=o(b(t,a),a);return _(a.map,t.attribution),I(u.current,t.eventHandlers),n(u.current,a,t,r),u}}function ee(o){return o.split(" ").filter(Boolean)}function ne(o,n){for(const e of ee(n))i.DomUtil.addClass(o,e)}function s(o,n,e){return Object.freeze({instance:o,context:n,container:e})}function L(o,n){return n==null?function(t,r){const a=c.useRef(void 0);return a.current||(a.current=o(t,r)),a}:function(t,r){const a=c.useRef(void 0);a.current||(a.current=o(t,r));const u=c.useRef(t),{instance:l}=a.current;return c.useEffect(function(){u.current!==t&&(n(l,t,u.current),u.current=t)},[l,t,n]),a}}function B(o,n){c.useEffect(function(){return(n.layerContainer??n.map).addLayer(o.instance),function(){n.layerContainer?.removeLayer(o.instance),n.map.removeLayer(o.instance)}},[n,o])}function M(o){return function(e){const t=v(),r=o(b(e,t),t);return _(t.map,e.attribution),I(r.current,e.eventHandlers),B(r.current,t),r}}function te(o,n){const e=c.useRef(void 0);c.useEffect(function(){if(n.pathOptions!==e.current){const r=n.pathOptions??{};o.instance.setStyle(r),e.current=r}},[o,n])}function oe(o){return function(e){const t=v(),r=o(b(e,t),t);return I(r.current,e.eventHandlers),B(r.current,t),te(r.current,e),r}}function k(o){function n(r,a){return s(o(r),a)}const e=L(n),t=V(e);return z(t)}function R(o,n){const e=L(o,n),t=M(e);return S(t)}function A(o,n){const e=L(o),t=Q(e,n);return K(t)}function E(o,n){const e=L(o,n),t=oe(e);return S(t)}function D(o,n){const e=L(o,n),t=M(e);return z(t)}function j(o,n,e){const{opacity:t,zIndex:r}=n;t!=null&&t!==e.opacity&&o.setOpacity(t),r!=null&&r!==e.zIndex&&o.setZIndex(r)}function x(o,n,e){n.bounds instanceof i.LatLngBounds&&n.bounds!==e.bounds&&o.setBounds(n.bounds),n.opacity!=null&&n.opacity!==e.opacity&&o.setOpacity(n.opacity),n.zIndex!=null&&n.zIndex!==e.zIndex&&o.setZIndex(n.zIndex)}function Z(){return v().map}function Ce(o,n){const e=Z();return c.useEffect(function(){return e.on(o,n),function(){e.off(o,n)}},[e,o,n]),e}function ve(o){const n=Z();return c.useEffect(function(){return n.on(o),function(){n.off(o)}},[n,o]),n}const Le=k(function(n){return new i.Control.Attribution(n)}),Ee=E(function({center:n,children:e,...t},r){const a=new i.Circle(n,t);return s(a,y(r,{overlayContainer:a}))},G),ge=E(function({center:n,children:e,...t},r){const a=new i.CircleMarker(n,t);return s(a,y(r,{overlayContainer:a}))},G),Oe=E(function({children:n,...e},t){const r=new i.FeatureGroup([],e);return s(r,y(t,{layerContainer:r,overlayContainer:r}))}),pe=E(function({data:n,...e},t){const r=new i.GeoJSON(n,e);return s(r,y(t,{overlayContainer:r}))},function(n,e,t){e.style!==t.style&&(e.style==null?n.resetStyle():n.setStyle(e.style))}),we=R(function({bounds:n,url:e,...t},r){const a=new i.ImageOverlay(e,n,t);return s(a,y(r,{overlayContainer:a}))},function(n,e,t){if(x(n,e,t),e.bounds!==t.bounds){const r=e.bounds instanceof i.LatLngBounds?e.bounds:new i.LatLngBounds(e.bounds);n.setBounds(r)}e.url!==t.url&&n.setUrl(e.url)}),be=R(function({children:n,...e},t){const r=new i.LayerGroup([],e);return s(r,y(t,{layerContainer:r}))}),re=L(function({children:n,...e},t){const r=new i.Control.Layers(void 0,void 0,e);return s(r,y(t,{layersControl:r}))},function(n,e,t){e.collapsed!==t.collapsed&&(e.collapsed===!0?n.collapse():n.expand())}),ae=V(re),J=S(ae);function U(o){return function(e){const t=v(),r=c.useRef(e),[a,u]=c.useState(null),{layersControl:l,map:f}=t,d=c.useCallback(C=>{l!=null&&(r.current.checked&&f.addLayer(C),o(l,C,r.current.name),u(C))},[o,l,f]),m=c.useCallback(C=>{l?.removeLayer(C),u(null)},[l]),P=c.useMemo(()=>y(t,{layerContainer:{addLayer:d,removeLayer:m}}),[t,d,m]);return c.useEffect(()=>{a!==null&&r.current!==e&&(e.checked===!0&&(r.current.checked==null||r.current.checked===!1)?f.addLayer(a):r.current.checked===!0&&(e.checked==null||e.checked===!1)&&f.removeLayer(a),r.current=e)}),e.children?p.createElement(w,{value:P},e.children):null}}J.BaseLayer=U(function(n,e,t){n.addBaseLayer(e,t)});J.Overlay=U(function(n,e,t){n.addOverlay(e,t)});function ue({bounds:o,boundsOptions:n,center:e,children:t,className:r,id:a,placeholder:u,style:l,whenReady:f,zoom:d,...m},P){const[C]=c.useState({className:r,id:a,style:l}),[g,F]=c.useState(null),H=c.useRef(void 0);c.useImperativeHandle(P,()=>g?.map??null,[g]);const W=c.useCallback(T=>{if(T!==null&&!H.current){const O=new i.Map(T,m);H.current=O,e!=null&&d!=null?O.setView(e,d):o!=null&&O.fitBounds(o,n),f!=null&&O.whenReady(f),F(Y(O))}},[]);c.useEffect(()=>()=>{g?.map.remove()},[g]);const q=g?p.createElement(w,{value:g},t):u??null;return p.createElement("div",{...C,ref:W},q)}const Re=c.forwardRef(ue),Pe=R(function({position:n,...e},t){const r=new i.Marker(n,e);return s(r,y(t,{overlayContainer:r}))},function(n,e,t){e.position!==t.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==t.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==t.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==t.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),ce=["mapPane","markerPane","overlayPane","popupPane","shadowPane","tilePane","tooltipPane"];function N(o,n){const{[n]:e,...t}=o;return t}function le(o,n,e){if(ce.indexOf(o)!==-1)throw new Error(`You must use a unique name for a pane that is not a default Leaflet pane: ${o}`);if(e.map.getPane(o)!=null)throw new Error(`A pane with this name already exists: ${o}`);const t=n.pane??e.pane,r=t?e.map.getPane(t):void 0,a=e.map.createPane(o,r);if(n.className!=null&&ne(a,n.className),n.style!=null)for(const u of Object.keys(n.style))a.style[u]=n.style[u];return a}function ie(o,n){const[e]=c.useState(o.name),[t,r]=c.useState(null);c.useImperativeHandle(n,()=>t,[t]);const a=v(),u=c.useMemo(()=>({...a,pane:e}),[a]);return c.useEffect(()=>(r(le(e,o,a)),function(){a.map.getPane(e)?.remove?.(),a.map._panes!=null&&(a.map._panes=N(a.map._panes,e),a.map._paneRenderers=N(a.map._paneRenderers,e))}),[]),o.children!=null&&t!=null?h.createPortal(p.createElement(w,{value:u},o.children),t):null}const he=c.forwardRef(ie),Se=E(function({positions:n,...e},t){const r=new i.Polygon(n,e);return s(r,y(t,{overlayContainer:r}))},function(n,e,t){e.positions!==t.positions&&n.setLatLngs(e.positions)}),Ie=E(function({positions:n,...e},t){const r=new i.Polyline(n,e);return s(r,y(t,{overlayContainer:r}))},function(n,e,t){e.positions!==t.positions&&n.setLatLngs(e.positions)}),Me=A(function(n,e){const t=new i.Popup(n,e.overlayContainer);return s(t,e)},function(n,e,{position:t},r){c.useEffect(function(){const{instance:u}=n;function l(d){d.popup===u&&(u.update(),r(!0))}function f(d){d.popup===u&&r(!1)}return e.map.on({popupopen:l,popupclose:f}),e.overlayContainer==null?(t!=null&&u.setLatLng(t),u.openOn(e.map)):e.overlayContainer.bindPopup(u),function(){e.map.off({popupopen:l,popupclose:f}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(u)}},[n,e,r,t])}),ke=E(function({bounds:n,...e},t){const r=new i.Rectangle(n,e);return s(r,y(t,{overlayContainer:r}))},function(n,e,t){e.bounds!==t.bounds&&n.setBounds(e.bounds)}),xe=k(function(n){return new i.Control.Scale(n)}),fe=L(function(n,e){const{attributes:t,bounds:r,...a}=n,u=document.createElementNS("http://www.w3.org/2000/svg","svg");if(u.setAttribute("xmlns","http://www.w3.org/2000/svg"),t!=null)for(const f of Object.keys(t))u.setAttribute(f,t[f]);const l=new i.SVGOverlay(u,r,a);return s(l,e,u)},x),se=M(fe);function de({children:o,...n},e){const{instance:t,container:r}=se(n).current;return c.useImperativeHandle(e,()=>t),r==null||o==null?null:h.createPortal(o,r)}const He=c.forwardRef(de),Te=D(function({url:n,...e},t){const r=new i.TileLayer(n,b(e,t));return s(r,t)},function(n,e,t){j(n,e,t);const{url:r}=e;r!=null&&r!==t.url&&n.setUrl(r)}),Ne=A(function(n,e){const t=new i.Tooltip(n,e.overlayContainer);return s(t,e)},function(n,e,{position:t},r){c.useEffect(function(){const u=e.overlayContainer;if(u==null)return;const{instance:l}=n,f=m=>{m.tooltip===l&&(t!=null&&l.setLatLng(t),l.update(),r(!0))},d=m=>{m.tooltip===l&&r(!1)};return u.on({tooltipopen:f,tooltipclose:d}),u.bindTooltip(l),function(){u.off({tooltipopen:f,tooltipclose:d}),u._map!=null&&u.unbindTooltip()}},[n,e,r,t])}),_e=R(function({bounds:n,url:e,...t},r){const a=new i.VideoOverlay(e,n,t);return t.play===!0&&a.getElement()?.play(),s(a,y(r,{overlayContainer:a}))},function(n,e,t){x(n,e,t),typeof e.url=="string"&&e.url!==t.url&&n.setUrl(e.url);const r=n.getElement();r!=null&&(e.play===!0&&!t.play?r.play():!e.play&&t.play===!0&&r.pause())}),Ge=D(function({eventHandlers:n,params:e={},url:t,...r},a){const u=new i.TileLayer.WMS(t,{...e,...b(r,a)});return s(u,a)},function(n,e,t){j(n,e,t),e.params!=null&&e.params!==t.params&&n.setParams(e.params)}),ze=k(function(n){return new i.Control.Zoom(n)});export{Le as AttributionControl,Ee as Circle,ge as CircleMarker,Oe as FeatureGroup,pe as GeoJSON,we as ImageOverlay,be as LayerGroup,J as LayersControl,Re as MapContainer,Pe as Marker,he as Pane,Se as Polygon,Ie as Polyline,Me as Popup,ke as Rectangle,He as SVGOverlay,xe as ScaleControl,Te as TileLayer,Ne as Tooltip,_e as VideoOverlay,Ge as WMSTileLayer,ze as ZoomControl,Z as useMap,Ce as useMapEvent,ve as useMapEvents};
